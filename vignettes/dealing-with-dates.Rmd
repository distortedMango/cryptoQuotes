---
title: "Dealing with date and time in cryptoQuotes"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Dates}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, message=FALSE}
library(cryptoQuotes)
```

## Introduction

All `get_*`-functions assumes that arguments passed from `from` and `to` are given in `UTC`. And since version `1.3.0` all returned values are reformatted to `Sys.timezone`.

To demonstrate this, let us look at the `hourly` Bitcoin at January 1, 2024 between `20:00:00` and `22:00:00`,

```{r}
## Set from
## and to values
from <- "2024-01-01 20:00:00"
to   <- "2024-01-01 22:00:00"
```



## Passing dates without setting timezone

If we pass the `from` and `to` arguments as-is, the function assumes the timezone as `UTC`,

```{r}
## Get BTC
## on the hourly
BTC <- get_quote(
  ticker   = "BTCUSDT",
  interval = "1h",
  from     = from,
  to       = to
)
```

This can best be demonstrated by setting the `from` and `to` dates equal to the `min` and `max` of the `BTC`-index,

```{r}
setequal(
  c(from, to),
  c(as.character(min(zoo::index(BTC))), as.character(max(zoo::index(BTC))))
)
```


## Passing dates with explicit timezone

Wrapping the `from` and `to` arguments in the `as.POSIXct`-function as follows,

```{r}
## Get BTC
## on the hourly 
## and setting timezone
BTC <- get_quote(
  ticker   = "BTCUSDT",
  interval = "1h",
  from     = as.POSIXct(from,tz = "UTC"),
  to       = as.POSIXct(to,tz = "UTC")
)
```

This returns the exact same `from` and `to` dates equal to the `min` and `max` of the `BTC`-index,

```{r}
setequal(
  c(from, to),
  c(as.character(min(zoo::index(BTC))), as.character(max(zoo::index(BTC))))
)
```


## Conclusion

If `time` and `date` are an important factor in your strategy, or analysis, you should be aware of this distinction.
